{"ast":null,"code":"import { objectWithoutPropertiesLoose as _objectWithoutPropertiesLoose, extends as _extends } from '../_virtual/_rollupPluginBabelHelpers.js';\nimport React, { useState, useContext, useRef, useReducer, useMemo, useCallback, useEffect } from 'react';\nimport { SettingsContext, MenuListContext, initialHoverIndex, HoverIndexActionTypes, MenuListItemContext, HoverIndexContext, Keys, menuClass, CloseReason, FocusPositions, menuArrowClass, SubmenuActionTypes } from '../utils/constants.js';\nimport { cloneChildren } from '../utils/cloneChildren.js';\nimport { getScrollAncestor, floatEqual, batchedUpdates, attachHandlerProps, isMenuOpen, getTransition, safeCall } from '../utils/utils.js';\nimport { getPositionHelpers } from '../positionUtils/getPositionHelpers.js';\nimport { positionContextMenu } from '../positionUtils/positionContextMenu.js';\nimport { positionMenu } from '../positionUtils/positionMenu.js';\nimport { useLayoutEffect as useIsomorphicLayoutEffect } from '../hooks/useIsomorphicLayoutEffect.js';\nimport { useBEM } from '../hooks/useBEM.js';\nimport { useFlatStyles } from '../hooks/useFlatStyles.js';\nimport { useCombinedRef } from '../hooks/useCombinedRef.js';\nvar _excluded = [\"ariaLabel\", \"menuClassName\", \"menuStyles\", \"arrowClassName\", \"arrowStyles\", \"anchorPoint\", \"anchorRef\", \"containerRef\", \"externalRef\", \"parentScrollingRef\", \"arrow\", \"align\", \"direction\", \"position\", \"overflow\", \"repositionFlag\", \"captureFocus\", \"state\", \"endTransition\", \"isDisabled\", \"menuItemFocus\", \"offsetX\", \"offsetY\", \"children\", \"onClose\"];\n\nvar MenuList = function MenuList(_ref) {\n  var ariaLabel = _ref.ariaLabel,\n      menuClassName = _ref.menuClassName,\n      menuStyles = _ref.menuStyles,\n      arrowClassName = _ref.arrowClassName,\n      arrowStyles = _ref.arrowStyles,\n      anchorPoint = _ref.anchorPoint,\n      anchorRef = _ref.anchorRef,\n      containerRef = _ref.containerRef,\n      externalRef = _ref.externalRef,\n      parentScrollingRef = _ref.parentScrollingRef,\n      arrow = _ref.arrow,\n      align = _ref.align,\n      direction = _ref.direction,\n      position = _ref.position,\n      overflow = _ref.overflow,\n      repositionFlag = _ref.repositionFlag,\n      _ref$captureFocus = _ref.captureFocus,\n      captureFocus = _ref$captureFocus === void 0 ? true : _ref$captureFocus,\n      state = _ref.state,\n      endTransition = _ref.endTransition,\n      isDisabled = _ref.isDisabled,\n      menuItemFocus = _ref.menuItemFocus,\n      offsetX = _ref.offsetX,\n      offsetY = _ref.offsetY,\n      children = _ref.children,\n      onClose = _ref.onClose,\n      restProps = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  var _useState = useState({\n    x: 0,\n    y: 0\n  }),\n      menuPosition = _useState[0],\n      setMenuPosition = _useState[1];\n\n  var _useState2 = useState({}),\n      arrowPosition = _useState2[0],\n      setArrowPosition = _useState2[1];\n\n  var _useState3 = useState(),\n      overflowData = _useState3[0],\n      setOverflowData = _useState3[1];\n\n  var _useState4 = useState(direction),\n      expandedDirection = _useState4[0],\n      setExpandedDirection = _useState4[1];\n\n  var _useContext = useContext(SettingsContext),\n      transition = _useContext.transition,\n      boundingBoxRef = _useContext.boundingBoxRef,\n      boundingBoxPadding = _useContext.boundingBoxPadding,\n      rootMenuRef = _useContext.rootMenuRef,\n      rootAnchorRef = _useContext.rootAnchorRef,\n      scrollingRef = _useContext.scrollingRef,\n      anchorScrollingRef = _useContext.anchorScrollingRef,\n      reposition = _useContext.reposition,\n      viewScroll = _useContext.viewScroll;\n\n  var reposFlag = useContext(MenuListContext).reposSubmenu || repositionFlag;\n  var menuRef = useRef(null);\n  var arrowRef = useRef(null);\n  var menuItemsCount = useRef(0);\n  var prevOpen = useRef(false);\n  var latestMenuSize = useRef({\n    width: 0,\n    height: 0\n  });\n  var latestHandlePosition = useRef(function () {});\n  var descendOverflowRef = useRef(false);\n  var isOpen = isMenuOpen(state);\n  var openTransition = getTransition(transition, 'open');\n  var closeTransition = getTransition(transition, 'close');\n\n  var reducer = function reducer(_ref2, action) {\n    var hoverIndex = _ref2.hoverIndex,\n        openSubmenuCount = _ref2.openSubmenuCount;\n    return {\n      hoverIndex: hoverIndexReducer(hoverIndex, action, menuItemsCount),\n      openSubmenuCount: submenuCountReducer(openSubmenuCount, action)\n    };\n  };\n\n  var _useReducer = useReducer(reducer, {\n    hoverIndex: initialHoverIndex,\n    openSubmenuCount: 0\n  }),\n      _useReducer$ = _useReducer[0],\n      hoverIndex = _useReducer$.hoverIndex,\n      openSubmenuCount = _useReducer$.openSubmenuCount,\n      dispatch = _useReducer[1];\n\n  var _useReducer2 = useReducer(function (c) {\n    return c + 1;\n  }, 1),\n      reposSubmenu = _useReducer2[0],\n      forceReposSubmenu = _useReducer2[1];\n\n  var menuItems = useMemo(function () {\n    var _cloneChildren = cloneChildren(children),\n        items = _cloneChildren.items,\n        index = _cloneChildren.index,\n        descendOverflow = _cloneChildren.descendOverflow;\n\n    menuItemsCount.current = index;\n    descendOverflowRef.current = descendOverflow;\n    return items;\n  }, [children]);\n\n  var handleKeyDown = function handleKeyDown(e) {\n    var handled = false;\n\n    switch (e.key) {\n      case Keys.HOME:\n        dispatch({\n          type: HoverIndexActionTypes.FIRST\n        });\n        handled = true;\n        break;\n\n      case Keys.END:\n        dispatch({\n          type: HoverIndexActionTypes.LAST\n        });\n        handled = true;\n        break;\n\n      case Keys.UP:\n        dispatch({\n          type: HoverIndexActionTypes.DECREASE\n        });\n        handled = true;\n        break;\n\n      case Keys.DOWN:\n        dispatch({\n          type: HoverIndexActionTypes.INCREASE\n        });\n        handled = true;\n        break;\n\n      case Keys.SPACE:\n        if (e.target && e.target.className.indexOf(menuClass) !== -1) {\n          e.preventDefault();\n        }\n\n        break;\n    }\n\n    if (handled) {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  };\n\n  var handleAnimationEnd = function handleAnimationEnd() {\n    if (state === 'closing') {\n      setOverflowData();\n    }\n\n    safeCall(endTransition);\n  };\n\n  var handlePosition = useCallback(function () {\n    if (!containerRef.current) {\n      if (process.env.NODE_ENV !== 'production') {\n        throw new Error('[React-Menu] Menu cannot be positioned properly as container ref is null. If you initialise isOpen prop to true for ControlledMenu, please see this link for a solution: https://github.com/szhsin/react-menu/issues/2#issuecomment-719166062');\n      }\n\n      return;\n    }\n\n    if (!scrollingRef.current) {\n      scrollingRef.current = boundingBoxRef ? boundingBoxRef.current : getScrollAncestor(rootMenuRef.current);\n    }\n\n    var positionHelpers = getPositionHelpers({\n      menuRef: menuRef,\n      containerRef: containerRef,\n      scrollingRef: scrollingRef,\n      boundingBoxPadding: boundingBoxPadding\n    });\n    var menuRect = positionHelpers.menuRect;\n    var results = {\n      computedDirection: 'bottom'\n    };\n\n    if (anchorPoint) {\n      results = positionContextMenu({\n        positionHelpers: positionHelpers,\n        anchorPoint: anchorPoint\n      });\n    } else if (anchorRef) {\n      results = positionMenu({\n        arrow: arrow,\n        align: align,\n        direction: direction,\n        offsetX: offsetX,\n        offsetY: offsetY,\n        position: position,\n        anchorRef: anchorRef,\n        arrowRef: arrowRef,\n        positionHelpers: positionHelpers\n      });\n    }\n\n    var _results = results,\n        arrowX = _results.arrowX,\n        arrowY = _results.arrowY,\n        x = _results.x,\n        y = _results.y,\n        computedDirection = _results.computedDirection;\n    var menuHeight = menuRect.height;\n\n    if (overflow !== 'visible') {\n      var getTopOverflow = positionHelpers.getTopOverflow,\n          getBottomOverflow = positionHelpers.getBottomOverflow;\n\n      var height, _overflowAmt;\n\n      var prevHeight = latestMenuSize.current.height;\n      var bottomOverflow = getBottomOverflow(y);\n\n      if (bottomOverflow > 0 || floatEqual(bottomOverflow, 0) && floatEqual(menuHeight, prevHeight)) {\n        height = menuHeight - bottomOverflow;\n        _overflowAmt = bottomOverflow;\n      } else {\n        var topOverflow = getTopOverflow(y);\n\n        if (topOverflow < 0 || floatEqual(topOverflow, 0) && floatEqual(menuHeight, prevHeight)) {\n          height = menuHeight + topOverflow;\n          _overflowAmt = 0 - topOverflow;\n          if (height >= 0) y -= topOverflow;\n        }\n      }\n\n      if (height >= 0) {\n        menuHeight = height;\n        setOverflowData({\n          height: height,\n          overflowAmt: _overflowAmt\n        });\n      } else {\n        setOverflowData();\n      }\n    }\n\n    if (arrow) setArrowPosition({\n      x: arrowX,\n      y: arrowY\n    });\n    setMenuPosition({\n      x: x,\n      y: y\n    });\n    setExpandedDirection(computedDirection);\n    latestMenuSize.current = {\n      width: menuRect.width,\n      height: menuHeight\n    };\n  }, [arrow, align, boundingBoxPadding, direction, offsetX, offsetY, position, overflow, anchorPoint, anchorRef, containerRef, boundingBoxRef, rootMenuRef, scrollingRef]);\n  useIsomorphicLayoutEffect(function () {\n    if (isOpen) {\n      handlePosition();\n      if (prevOpen.current) forceReposSubmenu();\n    }\n\n    prevOpen.current = isOpen;\n    latestHandlePosition.current = handlePosition;\n  }, [isOpen, handlePosition, reposFlag]);\n  useIsomorphicLayoutEffect(function () {\n    if (overflowData && !descendOverflowRef.current) menuRef.current.scrollTop = 0;\n  }, [overflowData]);\n  useEffect(function () {\n    if (!isOpen) return;\n\n    if (!anchorScrollingRef.current && rootAnchorRef && rootAnchorRef.current.tagName) {\n      anchorScrollingRef.current = getScrollAncestor(rootAnchorRef.current);\n    }\n\n    var scrollCurrent = scrollingRef.current;\n    var menuScroll = scrollCurrent && scrollCurrent.addEventListener ? scrollCurrent : window;\n    var anchorScroll = anchorScrollingRef.current || menuScroll;\n    var scroll = viewScroll;\n    if (anchorScroll !== menuScroll && scroll === 'initial') scroll = 'auto';\n    if (scroll === 'initial') return;\n    if (scroll === 'auto' && overflow !== 'visible') scroll = 'close';\n\n    var handleScroll = function handleScroll() {\n      if (scroll === 'auto') {\n        batchedUpdates(handlePosition);\n      } else {\n        safeCall(onClose, {\n          reason: CloseReason.SCROLL\n        });\n      }\n    };\n\n    var scrollObservers = anchorScroll !== menuScroll && viewScroll !== 'initial' ? [anchorScroll, menuScroll] : [anchorScroll];\n    scrollObservers.forEach(function (o) {\n      return o.addEventListener('scroll', handleScroll);\n    });\n    return function () {\n      return scrollObservers.forEach(function (o) {\n        return o.removeEventListener('scroll', handleScroll);\n      });\n    };\n  }, [rootAnchorRef, anchorScrollingRef, scrollingRef, isOpen, overflow, onClose, viewScroll, handlePosition]);\n  var hasOverflow = !!overflowData && overflowData.overflowAmt > 0;\n  useEffect(function () {\n    if (hasOverflow || !isOpen || !parentScrollingRef) return;\n\n    var handleScroll = function handleScroll() {\n      return batchedUpdates(handlePosition);\n    };\n\n    var parentScroll = parentScrollingRef.current;\n    parentScroll.addEventListener('scroll', handleScroll);\n    return function () {\n      return parentScroll.removeEventListener('scroll', handleScroll);\n    };\n  }, [isOpen, hasOverflow, parentScrollingRef, handlePosition]);\n  useEffect(function () {\n    if (typeof ResizeObserver !== 'function' || reposition === 'initial') return;\n    var resizeObserver = new ResizeObserver(function (_ref3) {\n      var entry = _ref3[0];\n      var borderBoxSize = entry.borderBoxSize,\n          target = entry.target;\n      var width, height;\n\n      if (borderBoxSize) {\n        var _ref4 = borderBoxSize[0] || borderBoxSize,\n            inlineSize = _ref4.inlineSize,\n            blockSize = _ref4.blockSize;\n\n        width = inlineSize;\n        height = blockSize;\n      } else {\n        var borderRect = target.getBoundingClientRect();\n        width = borderRect.width;\n        height = borderRect.height;\n      }\n\n      if (width === 0 || height === 0) return;\n      if (floatEqual(width, latestMenuSize.current.width, 1) && floatEqual(height, latestMenuSize.current.height, 1)) return;\n      batchedUpdates(function () {\n        latestHandlePosition.current();\n        forceReposSubmenu();\n      });\n    });\n    var observeTarget = menuRef.current;\n    resizeObserver.observe(observeTarget, {\n      box: 'border-box'\n    });\n    return function () {\n      return resizeObserver.unobserve(observeTarget);\n    };\n  }, [reposition]);\n  useEffect(function () {\n    if (!isOpen) {\n      dispatch({\n        type: HoverIndexActionTypes.RESET\n      });\n      if (!closeTransition) setOverflowData();\n      return;\n    }\n\n    var _ref5 = menuItemFocus || {},\n        position = _ref5.position,\n        alwaysUpdate = _ref5.alwaysUpdate;\n\n    var setItemFocus = function setItemFocus() {\n      if (position === FocusPositions.FIRST) {\n        dispatch({\n          type: HoverIndexActionTypes.FIRST\n        });\n      } else if (position === FocusPositions.LAST) {\n        dispatch({\n          type: HoverIndexActionTypes.LAST\n        });\n      } else if (position >= 0 && position < menuItemsCount.current) {\n        dispatch({\n          type: HoverIndexActionTypes.SET,\n          index: position\n        });\n      }\n    };\n\n    if (alwaysUpdate) {\n      setItemFocus();\n    } else if (captureFocus) {\n      var id = setTimeout(function () {\n        if (menuRef.current && !menuRef.current.contains(document.activeElement)) {\n          menuRef.current.focus();\n          setItemFocus();\n        }\n      }, openTransition ? 170 : 100);\n      return function () {\n        return clearTimeout(id);\n      };\n    }\n  }, [openTransition, closeTransition, captureFocus, isOpen, menuItemFocus]);\n  var isSubmenuOpen = openSubmenuCount > 0;\n  var itemContext = useMemo(function () {\n    return {\n      parentMenuRef: menuRef,\n      parentOverflow: overflow,\n      isParentOpen: isOpen,\n      isSubmenuOpen: isSubmenuOpen,\n      dispatch: dispatch\n    };\n  }, [isOpen, isSubmenuOpen, overflow]);\n  var maxHeight, overflowAmt;\n\n  if (overflowData) {\n    descendOverflowRef.current ? overflowAmt = overflowData.overflowAmt : maxHeight = overflowData.height;\n  }\n\n  var listContext = useMemo(function () {\n    return {\n      reposSubmenu: reposSubmenu,\n      overflow: overflow,\n      overflowAmt: overflowAmt\n    };\n  }, [reposSubmenu, overflow, overflowAmt]);\n  var overflowStyles = maxHeight >= 0 ? {\n    maxHeight: maxHeight,\n    overflow: overflow\n  } : undefined;\n  var modifiers = useMemo(function () {\n    return {\n      state: state,\n      dir: expandedDirection\n    };\n  }, [state, expandedDirection]);\n  var arrowModifiers = useMemo(function () {\n    return Object.freeze({\n      dir: expandedDirection\n    });\n  }, [expandedDirection]);\n\n  var _arrowClass = useBEM({\n    block: menuClass,\n    element: menuArrowClass,\n    modifiers: arrowModifiers,\n    className: arrowClassName\n  });\n\n  var _arrowStyles = useFlatStyles(arrowStyles, arrowModifiers);\n\n  var handlers = attachHandlerProps({\n    onKeyDown: handleKeyDown,\n    onAnimationEnd: handleAnimationEnd\n  }, restProps);\n  return /*#__PURE__*/React.createElement(\"ul\", _extends({\n    role: \"menu\",\n    tabIndex: \"-1\",\n    \"aria-disabled\": isDisabled || undefined,\n    \"aria-label\": ariaLabel\n  }, restProps, handlers, {\n    ref: useCombinedRef(externalRef, menuRef),\n    className: useBEM({\n      block: menuClass,\n      modifiers: modifiers,\n      className: menuClassName\n    }),\n    style: _extends({}, useFlatStyles(menuStyles, modifiers), overflowStyles, {\n      left: menuPosition.x + \"px\",\n      top: menuPosition.y + \"px\"\n    })\n  }), arrow && /*#__PURE__*/React.createElement(\"div\", {\n    className: _arrowClass,\n    style: _extends({}, _arrowStyles, {\n      left: arrowPosition.x && arrowPosition.x + \"px\",\n      top: arrowPosition.y && arrowPosition.y + \"px\"\n    }),\n    ref: arrowRef\n  }), /*#__PURE__*/React.createElement(MenuListContext.Provider, {\n    value: listContext\n  }, /*#__PURE__*/React.createElement(MenuListItemContext.Provider, {\n    value: itemContext\n  }, /*#__PURE__*/React.createElement(HoverIndexContext.Provider, {\n    value: hoverIndex\n  }, menuItems))));\n};\n\nfunction hoverIndexReducer(state, _ref6, menuItemsCount) {\n  var type = _ref6.type,\n      index = _ref6.index;\n\n  switch (type) {\n    case HoverIndexActionTypes.RESET:\n      return initialHoverIndex;\n\n    case HoverIndexActionTypes.SET:\n      return index;\n\n    case HoverIndexActionTypes.UNSET:\n      return state === index ? initialHoverIndex : state;\n\n    case HoverIndexActionTypes.DECREASE:\n      {\n        var i = state;\n        i--;\n        if (i < 0) i = menuItemsCount.current - 1;\n        return i;\n      }\n\n    case HoverIndexActionTypes.INCREASE:\n      {\n        var _i = state;\n        _i++;\n        if (_i >= menuItemsCount.current) _i = 0;\n        return _i;\n      }\n\n    case HoverIndexActionTypes.FIRST:\n      return menuItemsCount.current > 0 ? 0 : initialHoverIndex;\n\n    case HoverIndexActionTypes.LAST:\n      return menuItemsCount.current > 0 ? menuItemsCount.current - 1 : initialHoverIndex;\n\n    default:\n      return state;\n  }\n}\n\nfunction submenuCountReducer(state, _ref7) {\n  var type = _ref7.type;\n\n  switch (type) {\n    case SubmenuActionTypes.OPEN:\n      return state + 1;\n\n    case SubmenuActionTypes.CLOSE:\n      return Math.max(state - 1, 0);\n\n    default:\n      return state;\n  }\n}\n\nexport { MenuList };","map":{"version":3,"sources":["C:/Users/Shahwaiz Nathani/Desktop/mutrajim-fyp/Mehnat-o-Musshakat/node_modules/@szhsin/react-menu/dist/es/components/MenuList.js"],"names":["objectWithoutPropertiesLoose","_objectWithoutPropertiesLoose","extends","_extends","React","useState","useContext","useRef","useReducer","useMemo","useCallback","useEffect","SettingsContext","MenuListContext","initialHoverIndex","HoverIndexActionTypes","MenuListItemContext","HoverIndexContext","Keys","menuClass","CloseReason","FocusPositions","menuArrowClass","SubmenuActionTypes","cloneChildren","getScrollAncestor","floatEqual","batchedUpdates","attachHandlerProps","isMenuOpen","getTransition","safeCall","getPositionHelpers","positionContextMenu","positionMenu","useLayoutEffect","useIsomorphicLayoutEffect","useBEM","useFlatStyles","useCombinedRef","_excluded","MenuList","_ref","ariaLabel","menuClassName","menuStyles","arrowClassName","arrowStyles","anchorPoint","anchorRef","containerRef","externalRef","parentScrollingRef","arrow","align","direction","position","overflow","repositionFlag","_ref$captureFocus","captureFocus","state","endTransition","isDisabled","menuItemFocus","offsetX","offsetY","children","onClose","restProps","_useState","x","y","menuPosition","setMenuPosition","_useState2","arrowPosition","setArrowPosition","_useState3","overflowData","setOverflowData","_useState4","expandedDirection","setExpandedDirection","_useContext","transition","boundingBoxRef","boundingBoxPadding","rootMenuRef","rootAnchorRef","scrollingRef","anchorScrollingRef","reposition","viewScroll","reposFlag","reposSubmenu","menuRef","arrowRef","menuItemsCount","prevOpen","latestMenuSize","width","height","latestHandlePosition","descendOverflowRef","isOpen","openTransition","closeTransition","reducer","_ref2","action","hoverIndex","openSubmenuCount","hoverIndexReducer","submenuCountReducer","_useReducer","_useReducer$","dispatch","_useReducer2","c","forceReposSubmenu","menuItems","_cloneChildren","items","index","descendOverflow","current","handleKeyDown","e","handled","key","HOME","type","FIRST","END","LAST","UP","DECREASE","DOWN","INCREASE","SPACE","target","className","indexOf","preventDefault","stopPropagation","handleAnimationEnd","handlePosition","process","env","NODE_ENV","Error","positionHelpers","menuRect","results","computedDirection","_results","arrowX","arrowY","menuHeight","getTopOverflow","getBottomOverflow","_overflowAmt","prevHeight","bottomOverflow","topOverflow","overflowAmt","scrollTop","tagName","scrollCurrent","menuScroll","addEventListener","window","anchorScroll","scroll","handleScroll","reason","SCROLL","scrollObservers","forEach","o","removeEventListener","hasOverflow","parentScroll","ResizeObserver","resizeObserver","_ref3","entry","borderBoxSize","_ref4","inlineSize","blockSize","borderRect","getBoundingClientRect","observeTarget","observe","box","unobserve","RESET","_ref5","alwaysUpdate","setItemFocus","SET","id","setTimeout","contains","document","activeElement","focus","clearTimeout","isSubmenuOpen","itemContext","parentMenuRef","parentOverflow","isParentOpen","maxHeight","listContext","overflowStyles","undefined","modifiers","dir","arrowModifiers","Object","freeze","_arrowClass","block","element","_arrowStyles","handlers","onKeyDown","onAnimationEnd","createElement","role","tabIndex","ref","style","left","top","Provider","value","_ref6","UNSET","i","_i","_ref7","OPEN","CLOSE","Math","max"],"mappings":"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","sourcesContent":["import { objectWithoutPropertiesLoose as _objectWithoutPropertiesLoose, extends as _extends } from '../_virtual/_rollupPluginBabelHelpers.js';\nimport React, { useState, useContext, useRef, useReducer, useMemo, useCallback, useEffect } from 'react';\nimport { SettingsContext, MenuListContext, initialHoverIndex, HoverIndexActionTypes, MenuListItemContext, HoverIndexContext, Keys, menuClass, CloseReason, FocusPositions, menuArrowClass, SubmenuActionTypes } from '../utils/constants.js';\nimport { cloneChildren } from '../utils/cloneChildren.js';\nimport { getScrollAncestor, floatEqual, batchedUpdates, attachHandlerProps, isMenuOpen, getTransition, safeCall } from '../utils/utils.js';\nimport { getPositionHelpers } from '../positionUtils/getPositionHelpers.js';\nimport { positionContextMenu } from '../positionUtils/positionContextMenu.js';\nimport { positionMenu } from '../positionUtils/positionMenu.js';\nimport { useLayoutEffect as useIsomorphicLayoutEffect } from '../hooks/useIsomorphicLayoutEffect.js';\nimport { useBEM } from '../hooks/useBEM.js';\nimport { useFlatStyles } from '../hooks/useFlatStyles.js';\nimport { useCombinedRef } from '../hooks/useCombinedRef.js';\n\nvar _excluded = [\"ariaLabel\", \"menuClassName\", \"menuStyles\", \"arrowClassName\", \"arrowStyles\", \"anchorPoint\", \"anchorRef\", \"containerRef\", \"externalRef\", \"parentScrollingRef\", \"arrow\", \"align\", \"direction\", \"position\", \"overflow\", \"repositionFlag\", \"captureFocus\", \"state\", \"endTransition\", \"isDisabled\", \"menuItemFocus\", \"offsetX\", \"offsetY\", \"children\", \"onClose\"];\nvar MenuList = function MenuList(_ref) {\n  var ariaLabel = _ref.ariaLabel,\n      menuClassName = _ref.menuClassName,\n      menuStyles = _ref.menuStyles,\n      arrowClassName = _ref.arrowClassName,\n      arrowStyles = _ref.arrowStyles,\n      anchorPoint = _ref.anchorPoint,\n      anchorRef = _ref.anchorRef,\n      containerRef = _ref.containerRef,\n      externalRef = _ref.externalRef,\n      parentScrollingRef = _ref.parentScrollingRef,\n      arrow = _ref.arrow,\n      align = _ref.align,\n      direction = _ref.direction,\n      position = _ref.position,\n      overflow = _ref.overflow,\n      repositionFlag = _ref.repositionFlag,\n      _ref$captureFocus = _ref.captureFocus,\n      captureFocus = _ref$captureFocus === void 0 ? true : _ref$captureFocus,\n      state = _ref.state,\n      endTransition = _ref.endTransition,\n      isDisabled = _ref.isDisabled,\n      menuItemFocus = _ref.menuItemFocus,\n      offsetX = _ref.offsetX,\n      offsetY = _ref.offsetY,\n      children = _ref.children,\n      onClose = _ref.onClose,\n      restProps = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  var _useState = useState({\n    x: 0,\n    y: 0\n  }),\n      menuPosition = _useState[0],\n      setMenuPosition = _useState[1];\n\n  var _useState2 = useState({}),\n      arrowPosition = _useState2[0],\n      setArrowPosition = _useState2[1];\n\n  var _useState3 = useState(),\n      overflowData = _useState3[0],\n      setOverflowData = _useState3[1];\n\n  var _useState4 = useState(direction),\n      expandedDirection = _useState4[0],\n      setExpandedDirection = _useState4[1];\n\n  var _useContext = useContext(SettingsContext),\n      transition = _useContext.transition,\n      boundingBoxRef = _useContext.boundingBoxRef,\n      boundingBoxPadding = _useContext.boundingBoxPadding,\n      rootMenuRef = _useContext.rootMenuRef,\n      rootAnchorRef = _useContext.rootAnchorRef,\n      scrollingRef = _useContext.scrollingRef,\n      anchorScrollingRef = _useContext.anchorScrollingRef,\n      reposition = _useContext.reposition,\n      viewScroll = _useContext.viewScroll;\n\n  var reposFlag = useContext(MenuListContext).reposSubmenu || repositionFlag;\n  var menuRef = useRef(null);\n  var arrowRef = useRef(null);\n  var menuItemsCount = useRef(0);\n  var prevOpen = useRef(false);\n  var latestMenuSize = useRef({\n    width: 0,\n    height: 0\n  });\n  var latestHandlePosition = useRef(function () {});\n  var descendOverflowRef = useRef(false);\n  var isOpen = isMenuOpen(state);\n  var openTransition = getTransition(transition, 'open');\n  var closeTransition = getTransition(transition, 'close');\n\n  var reducer = function reducer(_ref2, action) {\n    var hoverIndex = _ref2.hoverIndex,\n        openSubmenuCount = _ref2.openSubmenuCount;\n    return {\n      hoverIndex: hoverIndexReducer(hoverIndex, action, menuItemsCount),\n      openSubmenuCount: submenuCountReducer(openSubmenuCount, action)\n    };\n  };\n\n  var _useReducer = useReducer(reducer, {\n    hoverIndex: initialHoverIndex,\n    openSubmenuCount: 0\n  }),\n      _useReducer$ = _useReducer[0],\n      hoverIndex = _useReducer$.hoverIndex,\n      openSubmenuCount = _useReducer$.openSubmenuCount,\n      dispatch = _useReducer[1];\n\n  var _useReducer2 = useReducer(function (c) {\n    return c + 1;\n  }, 1),\n      reposSubmenu = _useReducer2[0],\n      forceReposSubmenu = _useReducer2[1];\n\n  var menuItems = useMemo(function () {\n    var _cloneChildren = cloneChildren(children),\n        items = _cloneChildren.items,\n        index = _cloneChildren.index,\n        descendOverflow = _cloneChildren.descendOverflow;\n\n    menuItemsCount.current = index;\n    descendOverflowRef.current = descendOverflow;\n    return items;\n  }, [children]);\n\n  var handleKeyDown = function handleKeyDown(e) {\n    var handled = false;\n\n    switch (e.key) {\n      case Keys.HOME:\n        dispatch({\n          type: HoverIndexActionTypes.FIRST\n        });\n        handled = true;\n        break;\n\n      case Keys.END:\n        dispatch({\n          type: HoverIndexActionTypes.LAST\n        });\n        handled = true;\n        break;\n\n      case Keys.UP:\n        dispatch({\n          type: HoverIndexActionTypes.DECREASE\n        });\n        handled = true;\n        break;\n\n      case Keys.DOWN:\n        dispatch({\n          type: HoverIndexActionTypes.INCREASE\n        });\n        handled = true;\n        break;\n\n      case Keys.SPACE:\n        if (e.target && e.target.className.indexOf(menuClass) !== -1) {\n          e.preventDefault();\n        }\n\n        break;\n    }\n\n    if (handled) {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  };\n\n  var handleAnimationEnd = function handleAnimationEnd() {\n    if (state === 'closing') {\n      setOverflowData();\n    }\n\n    safeCall(endTransition);\n  };\n\n  var handlePosition = useCallback(function () {\n    if (!containerRef.current) {\n      if (process.env.NODE_ENV !== 'production') {\n        throw new Error('[React-Menu] Menu cannot be positioned properly as container ref is null. If you initialise isOpen prop to true for ControlledMenu, please see this link for a solution: https://github.com/szhsin/react-menu/issues/2#issuecomment-719166062');\n      }\n\n      return;\n    }\n\n    if (!scrollingRef.current) {\n      scrollingRef.current = boundingBoxRef ? boundingBoxRef.current : getScrollAncestor(rootMenuRef.current);\n    }\n\n    var positionHelpers = getPositionHelpers({\n      menuRef: menuRef,\n      containerRef: containerRef,\n      scrollingRef: scrollingRef,\n      boundingBoxPadding: boundingBoxPadding\n    });\n    var menuRect = positionHelpers.menuRect;\n    var results = {\n      computedDirection: 'bottom'\n    };\n\n    if (anchorPoint) {\n      results = positionContextMenu({\n        positionHelpers: positionHelpers,\n        anchorPoint: anchorPoint\n      });\n    } else if (anchorRef) {\n      results = positionMenu({\n        arrow: arrow,\n        align: align,\n        direction: direction,\n        offsetX: offsetX,\n        offsetY: offsetY,\n        position: position,\n        anchorRef: anchorRef,\n        arrowRef: arrowRef,\n        positionHelpers: positionHelpers\n      });\n    }\n\n    var _results = results,\n        arrowX = _results.arrowX,\n        arrowY = _results.arrowY,\n        x = _results.x,\n        y = _results.y,\n        computedDirection = _results.computedDirection;\n    var menuHeight = menuRect.height;\n\n    if (overflow !== 'visible') {\n      var getTopOverflow = positionHelpers.getTopOverflow,\n          getBottomOverflow = positionHelpers.getBottomOverflow;\n\n      var height, _overflowAmt;\n\n      var prevHeight = latestMenuSize.current.height;\n      var bottomOverflow = getBottomOverflow(y);\n\n      if (bottomOverflow > 0 || floatEqual(bottomOverflow, 0) && floatEqual(menuHeight, prevHeight)) {\n        height = menuHeight - bottomOverflow;\n        _overflowAmt = bottomOverflow;\n      } else {\n        var topOverflow = getTopOverflow(y);\n\n        if (topOverflow < 0 || floatEqual(topOverflow, 0) && floatEqual(menuHeight, prevHeight)) {\n          height = menuHeight + topOverflow;\n          _overflowAmt = 0 - topOverflow;\n          if (height >= 0) y -= topOverflow;\n        }\n      }\n\n      if (height >= 0) {\n        menuHeight = height;\n        setOverflowData({\n          height: height,\n          overflowAmt: _overflowAmt\n        });\n      } else {\n        setOverflowData();\n      }\n    }\n\n    if (arrow) setArrowPosition({\n      x: arrowX,\n      y: arrowY\n    });\n    setMenuPosition({\n      x: x,\n      y: y\n    });\n    setExpandedDirection(computedDirection);\n    latestMenuSize.current = {\n      width: menuRect.width,\n      height: menuHeight\n    };\n  }, [arrow, align, boundingBoxPadding, direction, offsetX, offsetY, position, overflow, anchorPoint, anchorRef, containerRef, boundingBoxRef, rootMenuRef, scrollingRef]);\n  useIsomorphicLayoutEffect(function () {\n    if (isOpen) {\n      handlePosition();\n      if (prevOpen.current) forceReposSubmenu();\n    }\n\n    prevOpen.current = isOpen;\n    latestHandlePosition.current = handlePosition;\n  }, [isOpen, handlePosition, reposFlag]);\n  useIsomorphicLayoutEffect(function () {\n    if (overflowData && !descendOverflowRef.current) menuRef.current.scrollTop = 0;\n  }, [overflowData]);\n  useEffect(function () {\n    if (!isOpen) return;\n\n    if (!anchorScrollingRef.current && rootAnchorRef && rootAnchorRef.current.tagName) {\n      anchorScrollingRef.current = getScrollAncestor(rootAnchorRef.current);\n    }\n\n    var scrollCurrent = scrollingRef.current;\n    var menuScroll = scrollCurrent && scrollCurrent.addEventListener ? scrollCurrent : window;\n    var anchorScroll = anchorScrollingRef.current || menuScroll;\n    var scroll = viewScroll;\n    if (anchorScroll !== menuScroll && scroll === 'initial') scroll = 'auto';\n    if (scroll === 'initial') return;\n    if (scroll === 'auto' && overflow !== 'visible') scroll = 'close';\n\n    var handleScroll = function handleScroll() {\n      if (scroll === 'auto') {\n        batchedUpdates(handlePosition);\n      } else {\n        safeCall(onClose, {\n          reason: CloseReason.SCROLL\n        });\n      }\n    };\n\n    var scrollObservers = anchorScroll !== menuScroll && viewScroll !== 'initial' ? [anchorScroll, menuScroll] : [anchorScroll];\n    scrollObservers.forEach(function (o) {\n      return o.addEventListener('scroll', handleScroll);\n    });\n    return function () {\n      return scrollObservers.forEach(function (o) {\n        return o.removeEventListener('scroll', handleScroll);\n      });\n    };\n  }, [rootAnchorRef, anchorScrollingRef, scrollingRef, isOpen, overflow, onClose, viewScroll, handlePosition]);\n  var hasOverflow = !!overflowData && overflowData.overflowAmt > 0;\n  useEffect(function () {\n    if (hasOverflow || !isOpen || !parentScrollingRef) return;\n\n    var handleScroll = function handleScroll() {\n      return batchedUpdates(handlePosition);\n    };\n\n    var parentScroll = parentScrollingRef.current;\n    parentScroll.addEventListener('scroll', handleScroll);\n    return function () {\n      return parentScroll.removeEventListener('scroll', handleScroll);\n    };\n  }, [isOpen, hasOverflow, parentScrollingRef, handlePosition]);\n  useEffect(function () {\n    if (typeof ResizeObserver !== 'function' || reposition === 'initial') return;\n    var resizeObserver = new ResizeObserver(function (_ref3) {\n      var entry = _ref3[0];\n      var borderBoxSize = entry.borderBoxSize,\n          target = entry.target;\n      var width, height;\n\n      if (borderBoxSize) {\n        var _ref4 = borderBoxSize[0] || borderBoxSize,\n            inlineSize = _ref4.inlineSize,\n            blockSize = _ref4.blockSize;\n\n        width = inlineSize;\n        height = blockSize;\n      } else {\n        var borderRect = target.getBoundingClientRect();\n        width = borderRect.width;\n        height = borderRect.height;\n      }\n\n      if (width === 0 || height === 0) return;\n      if (floatEqual(width, latestMenuSize.current.width, 1) && floatEqual(height, latestMenuSize.current.height, 1)) return;\n      batchedUpdates(function () {\n        latestHandlePosition.current();\n        forceReposSubmenu();\n      });\n    });\n    var observeTarget = menuRef.current;\n    resizeObserver.observe(observeTarget, {\n      box: 'border-box'\n    });\n    return function () {\n      return resizeObserver.unobserve(observeTarget);\n    };\n  }, [reposition]);\n  useEffect(function () {\n    if (!isOpen) {\n      dispatch({\n        type: HoverIndexActionTypes.RESET\n      });\n      if (!closeTransition) setOverflowData();\n      return;\n    }\n\n    var _ref5 = menuItemFocus || {},\n        position = _ref5.position,\n        alwaysUpdate = _ref5.alwaysUpdate;\n\n    var setItemFocus = function setItemFocus() {\n      if (position === FocusPositions.FIRST) {\n        dispatch({\n          type: HoverIndexActionTypes.FIRST\n        });\n      } else if (position === FocusPositions.LAST) {\n        dispatch({\n          type: HoverIndexActionTypes.LAST\n        });\n      } else if (position >= 0 && position < menuItemsCount.current) {\n        dispatch({\n          type: HoverIndexActionTypes.SET,\n          index: position\n        });\n      }\n    };\n\n    if (alwaysUpdate) {\n      setItemFocus();\n    } else if (captureFocus) {\n      var id = setTimeout(function () {\n        if (menuRef.current && !menuRef.current.contains(document.activeElement)) {\n          menuRef.current.focus();\n          setItemFocus();\n        }\n      }, openTransition ? 170 : 100);\n      return function () {\n        return clearTimeout(id);\n      };\n    }\n  }, [openTransition, closeTransition, captureFocus, isOpen, menuItemFocus]);\n  var isSubmenuOpen = openSubmenuCount > 0;\n  var itemContext = useMemo(function () {\n    return {\n      parentMenuRef: menuRef,\n      parentOverflow: overflow,\n      isParentOpen: isOpen,\n      isSubmenuOpen: isSubmenuOpen,\n      dispatch: dispatch\n    };\n  }, [isOpen, isSubmenuOpen, overflow]);\n  var maxHeight, overflowAmt;\n\n  if (overflowData) {\n    descendOverflowRef.current ? overflowAmt = overflowData.overflowAmt : maxHeight = overflowData.height;\n  }\n\n  var listContext = useMemo(function () {\n    return {\n      reposSubmenu: reposSubmenu,\n      overflow: overflow,\n      overflowAmt: overflowAmt\n    };\n  }, [reposSubmenu, overflow, overflowAmt]);\n  var overflowStyles = maxHeight >= 0 ? {\n    maxHeight: maxHeight,\n    overflow: overflow\n  } : undefined;\n  var modifiers = useMemo(function () {\n    return {\n      state: state,\n      dir: expandedDirection\n    };\n  }, [state, expandedDirection]);\n  var arrowModifiers = useMemo(function () {\n    return Object.freeze({\n      dir: expandedDirection\n    });\n  }, [expandedDirection]);\n\n  var _arrowClass = useBEM({\n    block: menuClass,\n    element: menuArrowClass,\n    modifiers: arrowModifiers,\n    className: arrowClassName\n  });\n\n  var _arrowStyles = useFlatStyles(arrowStyles, arrowModifiers);\n\n  var handlers = attachHandlerProps({\n    onKeyDown: handleKeyDown,\n    onAnimationEnd: handleAnimationEnd\n  }, restProps);\n  return /*#__PURE__*/React.createElement(\"ul\", _extends({\n    role: \"menu\",\n    tabIndex: \"-1\",\n    \"aria-disabled\": isDisabled || undefined,\n    \"aria-label\": ariaLabel\n  }, restProps, handlers, {\n    ref: useCombinedRef(externalRef, menuRef),\n    className: useBEM({\n      block: menuClass,\n      modifiers: modifiers,\n      className: menuClassName\n    }),\n    style: _extends({}, useFlatStyles(menuStyles, modifiers), overflowStyles, {\n      left: menuPosition.x + \"px\",\n      top: menuPosition.y + \"px\"\n    })\n  }), arrow && /*#__PURE__*/React.createElement(\"div\", {\n    className: _arrowClass,\n    style: _extends({}, _arrowStyles, {\n      left: arrowPosition.x && arrowPosition.x + \"px\",\n      top: arrowPosition.y && arrowPosition.y + \"px\"\n    }),\n    ref: arrowRef\n  }), /*#__PURE__*/React.createElement(MenuListContext.Provider, {\n    value: listContext\n  }, /*#__PURE__*/React.createElement(MenuListItemContext.Provider, {\n    value: itemContext\n  }, /*#__PURE__*/React.createElement(HoverIndexContext.Provider, {\n    value: hoverIndex\n  }, menuItems))));\n};\n\nfunction hoverIndexReducer(state, _ref6, menuItemsCount) {\n  var type = _ref6.type,\n      index = _ref6.index;\n\n  switch (type) {\n    case HoverIndexActionTypes.RESET:\n      return initialHoverIndex;\n\n    case HoverIndexActionTypes.SET:\n      return index;\n\n    case HoverIndexActionTypes.UNSET:\n      return state === index ? initialHoverIndex : state;\n\n    case HoverIndexActionTypes.DECREASE:\n      {\n        var i = state;\n        i--;\n        if (i < 0) i = menuItemsCount.current - 1;\n        return i;\n      }\n\n    case HoverIndexActionTypes.INCREASE:\n      {\n        var _i = state;\n        _i++;\n        if (_i >= menuItemsCount.current) _i = 0;\n        return _i;\n      }\n\n    case HoverIndexActionTypes.FIRST:\n      return menuItemsCount.current > 0 ? 0 : initialHoverIndex;\n\n    case HoverIndexActionTypes.LAST:\n      return menuItemsCount.current > 0 ? menuItemsCount.current - 1 : initialHoverIndex;\n\n    default:\n      return state;\n  }\n}\n\nfunction submenuCountReducer(state, _ref7) {\n  var type = _ref7.type;\n\n  switch (type) {\n    case SubmenuActionTypes.OPEN:\n      return state + 1;\n\n    case SubmenuActionTypes.CLOSE:\n      return Math.max(state - 1, 0);\n\n    default:\n      return state;\n  }\n}\n\nexport { MenuList };\n"]},"metadata":{},"sourceType":"module"}